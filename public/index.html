<!DOCTYPE html>
<html lang="pt-BR" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Marruá Consultoria - Evite Perdas no Abate</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@600;700&family=Inter:wght@400;500&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; }
        h1, h2, h3, h4, h5, h6 { font-family: 'Poppins', sans-serif; }
        .tab-button.active {
            border-color: #ca8a04; /* yellow-600 */
            color: #ca8a04;
        }
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
        [data-aos] {
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.6s ease-out, transform 0.6s ease-out;
        }
        [data-aos].aos-animate {
            opacity: 1;
            transform: translateY(0);
        }
    </style>
</head>
<body class="bg-white text-gray-800">

    <!-- ===== Header ===== -->
    <header id="header" class="fixed top-0 left-0 right-0 z-50 transition-all duration-300 bg-transparent">
        <div class="container mx-auto px-6 py-4 flex justify-between items-center">
            <a href="#home" id="header-title" class="text-2xl font-bold cursor-pointer text-white">
                Marruá <span class="text-yellow-500">Consultoria</span>
            </a>
            <nav class="hidden md:flex space-x-8 items-center">
                <a href="#prejuizo" class="capitalize transition-colors duration-200 text-gray-200 hover:text-yellow-400">O Prejuízo</a>
                <a href="#solucao" class="capitalize transition-colors duration-200 text-gray-200 hover:text-yellow-400">Nossa Atuação</a>
                <a href="#pontos-criticos" class="capitalize transition-colors duration-200 text-gray-200 hover:text-yellow-400">Pontos Críticos</a>
                <a href="https://wa.me/5567992196499?text=Ol%C3%A1%2C%20vim%20do%20site%20e%20gostaria%20de%20mais%20informa%C3%A7%C3%B5es." target="_blank" rel="noopener noreferrer" class="bg-yellow-500 hover:bg-yellow-600 text-black font-bold py-2 px-5 rounded-full transition-transform duration-200 ease-in-out hover:scale-105">
                    Fale Conosco
                </a>
            </nav>
            <button id="mobile-menu-button" class="md:hidden text-white">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg>
            </button>
        </div>
        <!-- Mobile Menu -->
        <div id="mobile-menu" class="hidden md:hidden bg-white/95 pb-4">
             <nav class="flex flex-col items-center space-y-4">
                 <a href="#prejuizo" class="capitalize text-gray-600 hover:text-yellow-600 py-2">O Prejuízo</a>
                 <a href="#solucao" class="capitalize text-gray-600 hover:text-yellow-600 py-2">Nossa Atuação</a>
                 <a href="#pontos-criticos" class="capitalize text-gray-600 hover:text-yellow-600 py-2">Pontos Críticos</a>
                 <a href="https://wa.me/5567992196499?text=Ol%C3%A1%2C%20vim%20do%20site%20e%20gostaria%20de%20mais%20informa%C3%A7%C3%B5es." target="_blank" rel="noopener noreferrer" class="bg-yellow-500 hover:bg-yellow-600 text-black font-bold w-4/5 text-center py-2 px-5 rounded-full mt-2">Fale Conosco</a>
             </nav>
        </div>
    </header>

    <main>
        <!-- ===== Hero Section ===== -->
        <section id="home" class="relative h-screen flex items-center justify-center text-white overflow-hidden">
            <video id="home-video" autoplay muted loop playsinline class="absolute top-1/2 left-1/2 min-w-full min-h-full w-auto h-auto z-0 transform -translate-x-1/2 -translate-y-1/2 object-cover"></video>
            <div class="absolute inset-0 bg-black/60 z-10"></div>
            <div class="container mx-auto px-6 text-center relative z-20">
                <h1 id="home-title" class="text-4xl md:text-6xl font-bold leading-tight mb-4" style="text-shadow: 2px 2px 8px rgba(0,0,0,0.7);">Carregando...</h1>
                <p id="home-subtitle" class="text-lg md:text-xl text-gray-200 max-w-3xl mx-auto mb-8" style="text-shadow: 1px 1px 4px rgba(0,0,0,0.7);"></p>
                <div class="flex flex-col sm:flex-row justify-center items-center gap-4">
                    <a id="home-cta" href="#" class="w-full sm:w-auto bg-yellow-500 text-black font-bold py-3 px-8 rounded-full text-lg hover:bg-yellow-600 transition shadow-lg transform hover:scale-105"></a>
                    <a id="home-secondary-cta" href="#" target="_blank" rel="noopener noreferrer" class="w-full sm:w-auto text-white font-semibold py-3 px-8 rounded-full text-lg hover:bg-white/20 transition border-2 border-white"></a>
                </div>
            </div>
        </section>

        <!-- ===== Loss Calculator Section ===== -->
        <section id="prejuizo" class="py-20 md:py-28 bg-gray-100">
            <div class="container mx-auto px-6" data-aos>
                <div class="text-center mb-12">
                    <h2 id="prejuizo-title" class="text-3xl md:text-4xl font-bold text-gray-800">Carregando...</h2>
                    <p id="prejuizo-subtitle" class="text-lg text-gray-600 mt-2 max-w-3xl mx-auto"></p>
                </div>
                <div class="bg-white p-6 md:p-8 rounded-2xl shadow-lg max-w-4xl mx-auto border border-gray-200">
                    <div class="grid md:grid-cols-2 gap-6 md:gap-8 items-center">
                        <div class="space-y-6">
                            <div>
                                <label for="numCabecas" class="block font-semibold mb-2 text-left text-gray-700">Quantidade de Animais no Lote</label>
                                <input type="range" id="numCabecas" min="10" max="1000" value="100" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-yellow-500"/>
                                <div class="flex justify-between text-sm text-gray-500 mt-1">
                                    <span>10</span>
                                    <span id="numCabecasLabel" class="font-bold text-yellow-600 text-lg">100</span>
                                    <span>1000</span>
                                </div>
                            </div>
                            <div>
                                <label for="valorArroba" class="block font-semibold mb-2 text-left text-gray-700">Valor da Arroba (@) em R$</label>
                                <input type="number" id="valorArroba" value="315" class="w-full p-3 border border-gray-300 rounded-lg text-center text-lg font-semibold focus:ring-2 focus:ring-yellow-500 focus:outline-none"/>
                            </div>
                        </div>
                        <div class="bg-red-50 text-center p-6 rounded-xl border-2 border-dashed border-red-200">
                            <p class="text-gray-700 text-lg mb-2">Seu prejuízo potencial é de:</p>
                            <h3 id="perdaTotal" class="text-4xl md:text-5xl font-bold text-red-600">R$ 0,00</h3>
                            <p id="perdaMediaAnimal" class="text-gray-600 mt-2"></p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- ===== Features Section ===== -->
        <section id="solucao" class="py-20 md:py-28 bg-white">
             <div class="container mx-auto px-6">
                <div class="text-center mb-16" data-aos>
                    <h2 id="solucao-title" class="text-3xl md:text-4xl font-bold text-gray-800">Carregando...</h2>
                    <p id="solucao-subtitle" class="text-lg text-gray-600 mt-2 max-w-2xl mx-auto"></p>
                </div>
                <div id="solucao-features" class="grid md:grid-cols-2 lg:grid-cols-4 gap-8">
                    <!-- Features serão inseridas dinamicamente aqui -->
                </div>
            </div>
        </section>

        <!-- ===== Critical Points Section ===== -->
        <section id="pontos-criticos" class="py-20 md:py-28 bg-gray-800 text-white">
            <div class="container mx-auto px-6" data-aos>
                <div class="text-center mb-12">
                    <h2 id="pontos-criticos-title" class="text-3xl md:text-4xl font-bold">Carregando...</h2>
                    <p id="pontos-criticos-subtitle" class="text-lg text-yellow-200 mt-2 max-w-3xl mx-auto"></p>
                </div>
                <div class="w-full max-w-6xl mx-auto">
                    <div id="tab-buttons" class="mb-6 overflow-x-auto pb-2 no-scrollbar flex space-x-1 md:space-x-2 border-b border-gray-600 w-max mx-auto">
                        <!-- Botões das abas serão inseridos aqui -->
                    </div>
                    <div id="tab-content" class="bg-gray-900 p-6 md:p-8 rounded-lg shadow-inner border border-gray-700 min-h-[420px] flex items-center">
                        <p>Selecione um ponto crítico para ver os detalhes.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- ===== CTA Section ===== -->
        <section id="contato" class="relative py-20 md:py-32 bg-cover bg-center bg-fixed">
            <div class="absolute inset-0 bg-black/70"></div>
            <div class="container mx-auto px-6 text-center text-white relative z-10" data-aos>
                <h2 id="contato-title" class="text-3xl md:text-5xl font-bold mb-4">Carregando...</h2>
                <p id="contato-subtitle" class="text-lg md:text-xl text-gray-200 max-w-3xl mx-auto mb-10"></p>
                <a id="contato-cta" href="#" target="_blank" rel="noopener noreferrer" class="bg-yellow-500 hover:bg-yellow-600 text-black font-bold text-xl py-4 px-10 rounded-full shadow-lg transform hover:scale-105 transition-all duration-300 ease-in-out inline-flex items-center group">
                </a>
            </div>
        </section>
    </main>

    <!-- ===== Footer ===== -->
    <footer class="bg-gray-800 text-white py-12">
        <div class="container mx-auto px-6 text-center">
            <h3 class="text-2xl font-bold">Marruá Consultoria</h3>
            <p class="text-gray-400 mt-2">Protegendo o lucro da pecuária, do pasto ao frigorífico.</p>
            <div class="mt-6">
                <a href="https://wa.me/5567992196499?text=Ol%C3%A1%2C%20vim%20do%20site%20e%20gostaria%20de%20mais%20informa%C3%A7%C3%B5es." target="_blank" rel="noopener noreferrer" class="bg-yellow-500 text-black font-semibold py-3 px-6 rounded-full inline-flex items-center gap-2 hover:bg-yellow-400 transition">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M12.04 2C6.58 2 2.13 6.45 2.13 11.91C2.13 13.66 2.61 15.35 3.48 16.84L2.06 22L7.31 20.58C8.75 21.38 10.36 21.82 12.04 21.82C17.5 21.82 21.95 17.37 21.95 11.91C21.95 9.27 20.92 6.8 19.21 4.9C17.5 3.01 14.94 2 12.04 2ZM9.15 6.88C8.94 6.88 8.74 6.88 8.53 7.29C8.33 7.7 7.68 8.31 7.68 9.44C7.68 10.57 8.56 11.64 8.71 11.82C8.85 12 10.65 14.82 13.43 16.01C15.67 16.97 16.2 16.76 16.63 16.71C17.06 16.66 18.01 16.1 18.21 15.5C18.41 14.9 18.41 14.39 18.31 14.29C18.21 14.19 18.01 14.1 17.71 13.95C17.41 13.8 16.2 13.22 15.95 13.12C15.7 13.02 15.5 12.97 15.3 13.27C15.1 13.57 14.63 14.1 14.48 14.25C14.33 14.4 14.18 14.45 13.88 14.3C13.58 14.15 12.67 13.84 11.59 12.87C10.72 12.09 10.14 11.16 9.97 10.86C9.79 10.56 9.94 10.43 10.09 10.28C10.22 10.15 10.39 9.95 10.54 9.8C10.69 9.65 10.74 9.53 10.64 9.33C10.54 9.13 10.02 7.9 9.82 7.4C9.63 6.9 9.43 6.88 9.15 6.88Z"></path></svg>
                    Fale Conosco no WhatsApp
                </a>
            </div>
            <p class="text-sm text-gray-500 mt-8">&copy; <span id="year"></span> Marruá Consultoria. Todos os direitos reservados.</p>
        </div>
    </footer>

    <!-- Firebase Scripts -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.7/firebase-app.js";
        import { getFirestore, collection, getDocs } from "https://www.gstatic.com/firebasejs/9.6.7/firebase-firestore.js";

        const firebaseConfig = {
          apiKey: "AIzaSyCP_QD2ekfd1qif82Eg02eKg6Xuqnsfl80",
          authDomain: "marrua-consultoria.firebaseapp.com",
          projectId: "marrua-consultoria",
          storageBucket: "marrua-consultoria.firebasestorage.app",
          messagingSenderId: "274732967705",
          appId: "1:274732967705:web:9349b6256ea095d39f8788",
          measurementId: "G-BM7CLYZJ1K"
        };

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        // --- DADOS INICIAIS (Fallback) ---
        const fallbackData = {
            home: {
                title: 'Seu lucro não pode virar prejuízo no final da linha.',
                subtitle: 'A Marruá Consultoria garante que cada grama do seu investimento seja valorizada no frigorífico. Atuamos onde o seu trabalho é mais vulnerável.',
                backgroundVideoUrl: 'https://firebasestorage.googleapis.com/v0/b/platamais.firebasestorage.app/o/saude%20kangen%20brasil%2FV%C3%ADdeo%20sem%20t%C3%ADtulo.mp4?alt=media&token=78e9f776-133d-4e18-be82-556a4700bd5d',
                cta: { text: 'Calcular meu prejuízo', link: '#prejuizo' },
                secondary_cta: { text: 'Fale com um especialista', link: 'https://wa.me/5567992196499?text=Ol%C3%A1%2C%20vim%20do%20site%20e%20gostaria%20de%20mais%20informa%C3%A7%C3%B5es.' }
            },
            prejuizo: {
                title: 'Você está deixando dinheiro no frigorífico.',
                subtitle: 'Meses de investimento em genética, nutrição e sanidade podem ser perdidos em poucas horas por falhas no processo de abate. Calcule seu prejuízo potencial e veja o quanto seu lucro está em risco.',
                defaultArrobaValue: 315
            },
            solucao: {
                title: 'Mais que olhos: somos ação e correção.',
                subtitle: 'No ambiente dinâmico do frigorífico, não adianta apenas apontar um erro. É preciso ter o conhecimento técnico e a atitude para garantir que a correção seja feita na hora. A Marruá atua como seu especialista em tempo real, defendendo cada grama do seu trabalho.',
                features: [
                    { title: 'Ação Imediata', description: 'Identificamos desvios e atuamos na hora para corrigir o processo, minimizando perdas.' },
                    { title: 'Defesa Técnica', description: 'Argumentamos tecnicamente para garantir a classificação justa e o pagamento de bonificações.' },
                    { title: 'Prevenção de Perdas', description: 'Nosso acompanhamento evita remoções excessivas e garante o máximo rendimento de carcaça.' },
                    { title: 'Relatório Detalhado', description: 'Você recebe um laudo completo com fotos e dados para entender os resultados do seu lote.' },
                ]
            },
            'pontos-criticos': {
                title: 'Os 9 Pontos Críticos Onde Seu Lucro Desaparece',
                subtitle: 'Pequenos erros operacionais, somados, geram um grande prejuízo. Nossa equipe técnica monitora e corrige ativamente estas falhas. Conheça cada ponto:',
                tabs: [
                    { id: 'esfola', name: 'Esfola', title: '1. Esfola do Quarto/Matambre', content: 'A remoção do couro deve ser precisa. Erros comuns podem retirar parte do matambre junto, impactando diretamente o peso da carcaça.', loss: '300g a 800g', imageUrl: 'imagens/esfola.jpg' },
                    { id: 'reata', name: 'Reata', title: '2. Reata', content: 'O couro deve ser baixado até o cupim; caso contrário, haverá remoção de gordura aderida, reduzindo o rendimento da carcaça.', loss: '200g a 600g', imageUrl: 'imagens/reata.jpg' },
                    { id: 'sangria', name: 'Sangria', title: '3. Sangria', content: 'A remoção da sangria deve ser precisa. Retirar carne em excesso nesta área é um erro comum que impacta o peso final.', loss: '200g a 500g', imageUrl: 'imagens/sangria.jpg' },
                    { id: 'ligamento', name: 'Ligamento', title: '4. Ligamento Cervical', content: 'A retirada do ligamento deve ser "limpa". Remover carne junto é um desperdício que afeta o aproveitamento da carcaça.', loss: '300g a 700g', imageUrl: 'imagens/ligamento.jpg' },
                    { id: 'abscesso', name: 'Abscesso', title: '5. Abscesso Vacinal', content: 'A remoção do abscesso é obrigatória, mas deve ser precisa. Retirar carne em excesso ao redor é um prejuízo direto.', loss: '200g a 800g', imageUrl: 'imagens/abscesso.jpg' },
                    { id: 'contaminacao', name: 'Contaminação', title: '6. D.I.F - Contaminação', content: 'O estouro do rúmen pode contaminar a carcaça. Sem acompanhamento, pode haver retirada de quilos de carne sem a correspondente compensação.', loss: 'Mínimo de 3kg', imageUrl: 'imagens/contaminacao.jpg' },
                    { id: 'queda', name: 'Queda', title: '7. D.I.F - Queda da Carcaça', content: 'Uma carcaça que cai do gancho é contaminada. A limpeza no D.I.F. pode resultar em grandes perdas de carne se não for acompanhada de perto.', loss: 'Mínimo de 5kg', imageUrl: 'imagens/queda.jpg' },
                    { id: 'doenca', name: 'Doença', title: '8. D.I.F - Desvio por Doença', content: 'Quando uma carcaça é desviada, acompanhamos a avaliação do veterinário, documentando o processo para garantir que apenas o necessário seja descartado.', loss: 'Variável, até 100%', imageUrl: 'imagens/doenca.jpg' },
                    { id: 'bezerros', name: 'Bezerros', title: '9. Bezerros em Abate', content: 'A inclusão indevida de bezerros no romaneio gera cobranças erradas no pagamento final, um prejuízo oculto e significativo.', loss: 'Até R$600/bezerro', imageUrl: 'imagens/bezerros.jpg' },
                ]
            },
            contato: {
                title: 'Sua Próxima Abate, Zero Prejuízo.',
                subtitle: 'Nossa confiança no resultado é total. Por isso, a primeira avaliação é um presente. Acompanhamos seu lote, identificamos as perdas e entregamos um diagnóstico completo. Sem custos, sem compromisso.',
                backgroundImageUrl: 'https://images.unsplash.com/photo-1444956927939-0c98d03c12a8?q=80&w=2070&auto=format&fit=crop',
                cta: { text: 'Agendar Avaliação Gratuita', link: 'https://wa.me/5567992196499?text=Ol%C3%A1%2C%20gostaria%20de%20agendar%20minha%20avalia%C3%A7%C3%A3o%20de%20abate%20gratuita%21' }
            }
        };

        // Função para preencher o conteúdo da página
        function renderContent(sections) {
            // --- Preencher Seção Hero (home) ---
            const home = sections.home;
            if (home) {
                document.getElementById('home-title').innerText = home.title;
                document.getElementById('home-subtitle').innerText = home.subtitle;
                if(home.backgroundVideoUrl) document.getElementById('home-video').src = home.backgroundVideoUrl;
                if(home.cta) {
                    const cta1 = document.getElementById('home-cta');
                    cta1.innerText = home.cta.text;
                    cta1.href = home.cta.link;
                }
                if(home.secondary_cta) {
                    const cta2 = document.getElementById('home-secondary-cta');
                    cta2.innerText = home.secondary_cta.text;
                    cta2.href = home.secondary_cta.link;
                }
            }

            // --- Preencher Seção Calculadora (prejuizo) ---
            const prejuizo = sections.prejuizo;
            if (prejuizo) {
                document.getElementById('prejuizo-title').innerText = prejuizo.title;
                document.getElementById('prejuizo-subtitle').innerText = prejuizo.subtitle;
                if (prejuizo.defaultArrobaValue) {
                    document.getElementById('valorArroba').value = prejuizo.defaultArrobaValue;
                }
            }

            // --- Preencher Seção Solução (features) ---
            const solucao = sections.solucao;
            if (solucao && solucao.features) {
                document.getElementById('solucao-title').innerText = solucao.title;
                document.getElementById('solucao-subtitle').innerText = solucao.subtitle;
                const featuresContainer = document.getElementById('solucao-features');
                featuresContainer.innerHTML = solucao.features.map(feature => `
                    <div data-aos>
                         <div class="bg-white p-8 rounded-xl shadow-md text-center h-full flex flex-col transition-transform duration-300 hover:-translate-y-2 border-t-4 border-yellow-500">
                             <div class="bg-yellow-500 text-white rounded-full w-16 h-16 flex items-center justify-center mx-auto mb-6">
                                 <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>
                             </div>
                             <h3 class="text-xl font-bold text-gray-800 mb-2">${feature.title}</h3>
                             <p class="text-gray-600 flex-grow">${feature.description}</p>
                         </div>
                    </div>
                `).join('');
            }
            
            // --- Preencher Seção Pontos Críticos (tabs) ---
            const pontosCriticos = sections['pontos-criticos'];
            if (pontosCriticos && pontosCriticos.tabs) {
                document.getElementById('pontos-criticos-title').innerText = pontosCriticos.title;
                document.getElementById('pontos-criticos-subtitle').innerText = pontosCriticos.subtitle;
                const tabButtonsContainer = document.getElementById('tab-buttons');
                tabButtonsContainer.innerHTML = pontosCriticos.tabs.map(tab => `
                    <button data-tab="${tab.id}" class="tab-button flex-shrink-0 text-sm md:text-base font-semibold p-3 md:p-4 border-b-2 transition-colors duration-200 border-transparent text-gray-400 hover:text-white">
                        ${tab.name}
                    </button>
                `).join('');
                
                const tabButtons = document.querySelectorAll('.tab-button');
                const tabContentContainer = document.getElementById('tab-content');

                function updateTabContent(tabId) {
                    const tabData = pontosCriticos.tabs.find(t => t.id === tabId);
                    if (tabData) {
                         tabContentContainer.innerHTML = `
                            <div class="grid md:grid-cols-2 gap-8 items-center w-full">
                                <div>
                                    <h3 class="text-2xl font-bold text-yellow-500 mb-3">${tabData.title}</h3>
                                    <p class="text-gray-300 mb-4">${tabData.content}</p>
                                    <div class="bg-red-900/50 border border-red-700 p-4 rounded-lg mt-4">
                                        <p class="font-semibold text-red-300">Prejuízo Potencial: <span class="text-xl font-bold text-white">${tabData.loss}</span></p>
                                    </div>
                                </div>
                                <div class="mt-4 md:mt-0">
                                    <img src="${tabData.imageUrl}" alt="Exemplo de ${tabData.name}" class="rounded-lg shadow-md w-full max-w-md mx-auto"/>
                                </div>
                            </div>`;
                    }
                }
                
                tabButtons.forEach(button => {
                    button.addEventListener('click', () => {
                        tabButtons.forEach(btn => btn.classList.remove('active'));
                        button.classList.add('active');
                        updateTabContent(button.dataset.tab);
                    });
                });

                if (tabButtons.length > 0) {
                    tabButtons[0].classList.add('active');
                    updateTabContent(tabButtons[0].dataset.tab);
                }
            }

            // --- Preencher Seção CTA (contato) ---
            const contato = sections.contato;
            if (contato) {
                const contatoSection = document.getElementById('contato');
                if(contato.backgroundImageUrl) contatoSection.style.backgroundImage = `linear-gradient(rgba(0, 0, 0, 0.7), rgba(0, 0, 0, 0.7)), url(${contato.backgroundImageUrl})`;
                document.getElementById('contato-title').innerText = contato.title;
                document.getElementById('contato-subtitle').innerText = contato.subtitle;
                if(contato.cta) {
                    const ctaContato = document.getElementById('contato-cta');
                    ctaContato.innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M12.04 2C6.58 2 2.13 6.45 2.13 11.91C2.13 13.66 2.61 15.35 3.48 16.84L2.06 22L7.31 20.58C8.75 21.38 10.36 21.82 12.04 21.82C17.5 21.82 21.95 17.37 21.95 11.91C21.95 9.27 20.92 6.8 19.21 4.9C17.5 3.01 14.94 2 12.04 2ZM9.15 6.88C8.94 6.88 8.74 6.88 8.53 7.29C8.33 7.7 7.68 8.31 7.68 9.44C7.68 10.57 8.56 11.64 8.71 11.82C8.85 12 10.65 14.82 13.43 16.01C15.67 16.97 16.2 16.76 16.63 16.71C17.06 16.66 18.01 16.1 18.21 15.5C18.41 14.9 18.41 14.39 18.31 14.29C18.21 14.19 18.01 14.1 17.71 13.95C17.41 13.8 16.2 13.22 15.95 13.12C15.7 13.02 15.5 12.97 15.3 13.27C15.1 13.57 14.63 14.1 14.48 14.25C14.33 14.4 14.18 14.45 13.88 14.3C13.58 14.15 12.67 13.84 11.59 12.87C10.72 12.09 10.14 11.16 9.97 10.86C9.79 10.56 9.94 10.43 10.09 10.28C10.22 10.15 10.39 9.95 10.54 9.8C10.69 9.65 10.74 9.53 10.64 9.33C10.54 9.13 10.02 7.9 9.82 7.4C9.63 6.9 9.43 6.88 9.15 6.88Z"></path></svg> <span class="ml-3">${contato.cta.text}</span>`;
                    ctaContato.href = contato.cta.link;
                }
            }
        }

        // --- Lógica Principal ---
        document.addEventListener('DOMContentLoaded', async () => {
            const sections = JSON.parse(JSON.stringify(fallbackData));

            try {
                const querySnapshot = await getDocs(collection(db, "siteContent"));
                
                querySnapshot.forEach(doc => {
                    const docId = doc.id;
                    if (sections[docId]) {
                        sections[docId] = { ...sections[docId], ...doc.data() };
                    } else {
                        sections[docId] = doc.data();
                    }
                });
                console.log("Conteúdo carregado e mesclado do Firebase com sucesso.");
            } catch (error) {
                console.error("Erro ao carregar do Firebase. A usar dados de fallback.", error);
            }

            renderContent(sections);

            // Lógica da Calculadora
            const numCabecasSlider = document.getElementById('numCabecas');
            const numCabecasLabel = document.getElementById('numCabecasLabel');
            const valorArrobaInput = document.getElementById('valorArroba');
            const perdaTotalDisplay = document.getElementById('perdaTotal');
            const perdaMediaAnimalDisplay = document.getElementById('perdaMediaAnimal');

            function updateCalculations() {
                const numCabecas = parseInt(numCabecasSlider.value);
                const valorArroba = parseFloat(valorArrobaInput.value) || 0;
                const perdaMediaPorKg = 2.5;
                numCabecasLabel.textContent = numCabecas;
                const valorKg = valorArroba / 15;
                const perdaPorAnimal = perdaMediaPorKg * valorKg;
                const perdaTotal = perdaPorAnimal * numCabecas;
                const formatCurrency = (value) => new Intl.NumberFormat('pt-BR', { style: 'currency', currency: 'BRL' }).format(value);
                perdaTotalDisplay.textContent = formatCurrency(perdaTotal);
                perdaMediaAnimalDisplay.textContent = `com base em uma perda média de ${formatCurrency(perdaPorAnimal)} por animal.`;
            }
            if(numCabecasSlider) {
                numCabecasSlider.addEventListener('input', updateCalculations);
                valorArrobaInput.addEventListener('input', updateCalculations);
                updateCalculations();
            }

            // Lógica do Header e Menu Mobile
            const header = document.getElementById('header');
            const mobileMenuButton = document.getElementById('mobile-menu-button');
            const mobileMenu = document.getElementById('mobile-menu');
            window.addEventListener('scroll', () => {
                const isScrolled = window.scrollY > 20;
                header.classList.toggle('bg-white/90', isScrolled);
                header.classList.toggle('shadow-md', isScrolled);
                header.classList.toggle('backdrop-blur-sm', isScrolled);
                header.classList.toggle('bg-transparent', !isScrolled);

                const headerTitle = header.querySelector('#header-title');
                if (headerTitle) {
                    headerTitle.classList.toggle('text-white', !isScrolled);
                    headerTitle.classList.toggle('text-gray-800', isScrolled);
                }
                
                header.querySelectorAll('nav a:not(.bg-yellow-500)').forEach(link => {
                    link.classList.toggle('text-gray-200', !isScrolled);
                    link.classList.toggle('hover:text-yellow-400', !isScrolled);
                    link.classList.toggle('text-gray-600', isScrolled);
                    link.classList.toggle('hover:text-yellow-600', isScrolled);
                });

                mobileMenuButton.classList.toggle('text-white', !isScrolled);
                mobileMenuButton.classList.toggle('text-gray-800', isScrolled);
            });
            mobileMenuButton.addEventListener('click', () => mobileMenu.classList.toggle('hidden'));
            document.querySelectorAll('#mobile-menu a').forEach(link => link.addEventListener('click', () => mobileMenu.classList.add('hidden')));

            // Lógica de Animação ao Rolar (AOS)
            const aosElements = document.querySelectorAll('[data-aos]');
            const observer = new IntersectionObserver(entries => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) entry.target.classList.add('aos-animate');
                });
            }, { threshold: 0.1 });
            aosElements.forEach(el => observer.observe(el));

            document.getElementById('year').textContent = new Date().getFullYear();
        });
    </script>
</body>
</html>
